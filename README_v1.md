# üöÄ Quiz Cloud - Sistema de Quiz para Enfermagem

Este projeto √© uma evolu√ß√£o do sistema original "Quiz Interativo". Ele foi preparado para manuten√ß√£o, atualiza√ß√£o e deploy em nuvem (Google Cloud), sem afetar o projeto anterior.

---

## üõ†Ô∏è Manuten√ß√£o e Atualiza√ß√£o

### 1. **Editar Perguntas**
- Os arquivos de perguntas ficam em `data/perguntas.json` (quiz comum) e `data/perguntas_recuperacao_organizado.json` (recupera√ß√£o ESF).
- Para editar, use um editor de texto ou a interface admin (`/admin`).
- Sempre fa√ßa backup antes de grandes altera√ß√µes.

#### 1.1 Fluxo de sincroniza√ß√£o (staging ‚Üí principal)
- Prepare novas perguntas em um arquivo de staging (ex.: `perguntas_staging.json` ou `perguntas_test.json`).
- Use `sincronizar_perguntas.py` para mesclar no banco principal com backup e deduplica√ß√£o. Por padr√£o, o script detecta o banco principal por `PERGUNTAS_JSON_PATH` (ou `data/perguntas.json`).

Comandos:
```bash
# Dry-run (apenas relata o que seria feito)
python sincronizar_perguntas.py --staging perguntas_test.json --dry-run

# Sincroniza usando PERGUNTAS_JSON_PATH (ou data/perguntas.json se n√£o definido)
python sincronizar_perguntas.py --staging perguntas_test.json

# Apontar explicitamente o banco principal (ex.: vers√£o anterior)
python sincronizar_perguntas.py --staging perguntas_test.json --main "G:/Meu Drive/prjetos python/quiz/quiz_1/data/perguntas.json"

# Desabilitar espelho local em data/perguntas.json
python sincronizar_perguntas.py --staging perguntas_test.json --no-mirror-local
```

Formato aceito no staging:
- Lista de perguntas `[...]` ou objeto `{ "perguntas": [ ... ] }`.

#### 1.2 Sistema de Perguntas do Professor

O sistema agora suporta **perguntas espec√≠ficas do professor** com destaque visual e distribui√ß√£o autom√°tica 70/30.

##### **Caracter√≠sticas das Perguntas do Professor:**
- ‚úÖ **Destaque visual**: `üë®‚Äçüè´ **[PROFESSOR]**` no enunciado
- ‚úÖ **Badge verde** na interface com legenda "üìö Material extra√≠do de aula presencial"
- ‚úÖ **Distribui√ß√£o inteligente**: 70% perguntas do professor, 30% material oficial
- ‚úÖ **Campos espec√≠ficos**: `fonte_material`, `legenda`, `prioridade_selecao`

##### **Formato das Perguntas do Professor:**
```json
{
  "pergunta": "üë®‚Äçüè´ **[PROFESSOR]** Segundo explicado em aula sobre...",
  "opcoes": [
    "Op√ß√£o correta detalhada",
    "Distrator plaus√≠vel relacionado",
    "Distrator com erro conceitual comum",
    "Distrator com invers√£o l√≥gica"
  ],
  "resposta_correta": "Op√ß√£o correta detalhada",
  "categoria": "T√≥pico - Subt√≥pico",
  "periodo": 2,
  "disciplina": "MORFOFISIOLOGIA II",
  "dificuldade": "medio",
  "explicacao": "Baseado nos apontamentos do professor: [explica√ß√£o detalhada com fundamenta√ß√£o cient√≠fica]",
  "referencia": "Apontamentos Prof. - [T√≥pico]",
  "fonte_material": "professor",
  "legenda": "üìö Material extra√≠do de aula presencial",
  "prioridade_selecao": 0.7
}
```

##### **Script Base para Cria√ß√£o de Perguntas do Professor:**

**SEMPRE USE ESTE TEMPLATE** ao criar novas perguntas baseadas em material do professor:

```
PAR√ÇMETROS DE GERA√á√ÉO:
‚úÖ Disciplina: [NOME_DA_DISCIPLINA]
‚úÖ Per√≠odo: [1 ou 2]
‚úÖ Dificuldade: M√âDIO e DIF√çCIL (sem perguntas f√°ceis)
‚úÖ Formato: M√∫ltipla escolha (4 alternativas)
‚úÖ Categoria: Por t√≥picos espec√≠ficos
‚úÖ Explica√ß√£o: Sempre detalhada e educativa

FOCOS PARA PERGUNTAS M√âDIO/DIF√çCIL:
M√âDIO:
- Aplica√ß√£o de conceitos em situa√ß√µes cl√≠nicas
- Correla√ß√£o entre estrutura e fun√ß√£o
- Compara√ß√£o entre diferentes sistemas
- An√°lise de mecanismos espec√≠ficos

DIF√çCIL:
- Integra√ß√£o de m√∫ltiplos sistemas
- An√°lise de casos patol√≥gicos
- Correla√ß√µes bioqu√≠micas complexas
- Aplica√ß√µes em diagn√≥stico/tratamento

TEMPLATE DE PERGUNTA:
{
  "pergunta": "üë®‚Äçüè´ **[PROFESSOR]** [Situa√ß√£o cl√≠nica/conceitual complexa baseada nos apontamentos]",
  "opcoes": [
    "Alternativa correta com detalhamento",
    "Distrator plaus√≠vel relacionado",
    "Distrator com erro conceitual comum",
    "Distrator com invers√£o l√≥gica"
  ],
  "resposta_correta": "[Resposta precisa]",
  "categoria": "[T√≥pico] - [Subt√≥pico]",
  "periodo": [1 ou 2],
  "disciplina": "[NOME_DISCIPLINA]",
  "dificuldade": "medio" ou "dificil",
  "explicacao": "Baseado nos apontamentos do professor: [explica√ß√£o detalhada]",
  "referencia": "Apontamentos Prof. - [T√≥pico]",
  "fonte_material": "professor",
  "legenda": "üìö Material extra√≠do de aula presencial",
  "prioridade_selecao": 0.7
}
```

## ü§ñ Scripts para IA - Copie e Cole estes Prompts

**üìã INSTRU√á√ÉO DE USO:**

Os scripts abaixo s√£o para serem copiados e usados com IAs (Claude, ChatGPT, etc.) para gerar perguntas seguindo o padr√£o do sistema. Escolha o script apropriado conforme o tipo de material.

**üéØ QUANDO USAR CADA SCRIPT:**

| Tipo de Material | Script a Usar | Identifica√ß√£o |
|-------------------|----------------|---------------|
| üìö **PDF da Universidade** | Script 1 (Material Oficial) | Unidades, M√≥dulos, Bibliografia |
| üìñ **Apostila do Curso** | Script 1 (Material Oficial) | Material estruturado/oficial |
| üìù **Livro Did√°tico** | Script 1 (Material Oficial) | Cap√≠tulos, se√ß√µes numeradas |
| üë®‚Äçüè´ **Apontamentos de Aula** | Script 2 (Material Professor) | Slides, explica√ß√µes exclusivas |
| üéì **Notas Pessoais** | Script 2 (Material Professor) | Coment√°rios, observa√ß√µes extras |

### üìö Script 1: Perguntas de Material Did√°tico Oficial

**üéØ USE ESTE SCRIPT PARA:**
- Material fornecido pela universidade (PDFs, livros did√°ticos)
- Apostilas oficiais do curso
- Conte√∫do de m√≥dulos/unidades estruturadas
- Material bibliogr√°fico recomendado

---
**ü§ñ PROMPT PARA INTELIG√äNCIA ARTIFICIAL (Claude, ChatGPT, etc.):**

```
Atue como um especialista em elabora√ß√£o de quest√µes para ensino superior baseadas em material did√°tico oficial.

REGRAS OBRIGAT√ìRIAS:
1. NUNCA crie perguntas de n√≠vel f√°cil - apenas M√âDIO e DIF√çCIL
2. SEMPRE base as perguntas no material did√°tico fornecido (PDF, apostila, livro)
3. SEMPRE inclua todos os campos obrigat√≥rios no JSON
4. SEMPRE crie explica√ß√µes detalhadas come√ßando com "Conforme descrito no material:"
5. SEMPRE referencie a fonte espec√≠fica (ex: "Unidade 1 - Tema 2")

ESTRUTURA DA PERGUNTA:
- Enunciado: Deve referenciar conceitos do material did√°tico
- 4 alternativas: 1 correta detalhada + 3 distratores plaus√≠veis
- Explica√ß√£o: M√≠nimo 2-3 linhas com fundamenta√ß√£o te√≥rica
- Categoria: Formato "Unidade X - Tema Y" ou similar da fonte

FOCOS POR N√çVEL:
M√âDIO:
- Conceitos fundamentais e suas aplica√ß√µes
- Rela√ß√£o entre diferentes t√≥picos
- Interpreta√ß√£o de defini√ß√µes e processos
- Classifica√ß√µes e caracter√≠sticas principais

DIF√çCIL:
- An√°lise cr√≠tica de conceitos complexos
- Integra√ß√£o entre m√∫ltiplos t√≥picos
- Aplica√ß√µes pr√°ticas avan√ßadas
- Resolu√ß√£o de problemas elaborados

PAR√ÇMETROS T√âCNICOS (INFORMAR SEMPRE):
- Disciplina: [NOME COMPLETO DA DISCIPLINA]
- Per√≠odo: [1, 2, 3, 4, etc. conforme o curso]
- Quantidade: [N√öMERO DE PERGUNTAS DESEJADAS]
- Material fonte: [T√çTULO/CAP√çTULO DO MATERIAL]

TEMPLATE JSON OBRIGAT√ìRIO:
{
  "pergunta": "Conforme apresentado no material sobre [T√ìPICO], [SITUA√á√ÉO/PERGUNTA]?",
  "opcoes": [
    "[RESPOSTA CORRETA COM DETALHES]",
    "[DISTRATOR PLAUS√çVEL 1]",
    "[DISTRATOR PLAUS√çVEL 2]",
    "[DISTRATOR PLAUS√çVEL 3]"
  ],
  "resposta_correta": "[REPETIR RESPOSTA CORRETA EXATA]",
  "categoria": "Unidade X - Tema Y",
  "periodo": [N√öMERO DO PER√çODO],
  "disciplina": "[NOME COMPLETO DA DISCIPLINA]",
  "dificuldade": "medio" ou "dificil",
  "explicacao": "Conforme descrito no material: [EXPLICA√á√ÉO DETALHADA]",
  "referencia": "[FONTE ESPEC√çFICA - ex: Unidade 1 Tema 2 DISCIPLINA.pdf]",
  "fonte_material": "oficial",
  "legenda": "üìñ Material did√°tico oficial",
  "prioridade_selecao": 0.3
}

AP√ìS ESTE PROMPT, FORNE√áA:
1. Material did√°tico (PDF, texto, imagens)
2. Nome completo da disciplina
3. Per√≠odo/semestre do curso
4. T√≥picos espec√≠ficos a serem abordados
5. N√∫mero de perguntas desejadas

EXEMPLOS DE USO PARA DIFERENTES DISCIPLINAS:

ENFERMAGEM:
"Baseado no PDF da Unidade 2 sobre Anatomia Cardiovascular, crie 8 perguntas para MORFOFISIOLOGIA II, per√≠odo 2, cobrindo: estrutura card√≠aca, circula√ß√£o, sistema de condu√ß√£o."

DIREITO:
"Baseado na apostila do M√≥dulo 3 sobre Processo Civil, crie 6 perguntas para DIREITO PROCESSUAL CIVIL, per√≠odo 4, cobrindo: peti√ß√£o inicial, cita√ß√£o, contesta√ß√£o."

MEDICINA:
"Baseado no livro-texto Cap√≠tulo 15 sobre Farmacologia, crie 10 perguntas para FARMACOLOGIA B√ÅSICA, per√≠odo 3, cobrindo: farmacocin√©tica, farmacodin√¢mica, intera√ß√µes."

ADMINISTRA√á√ÉO:
"Baseado na Unidade 4 sobre Gest√£o Financeira, crie 12 perguntas para ADMINISTRA√á√ÉO FINANCEIRA, per√≠odo 6, cobrindo: fluxo de caixa, an√°lise de investimentos, custo de capital."
```

---

### üë®‚Äçüè´ Script 2: Perguntas de Material do Professor

**üéØ USE ESTE SCRIPT PARA:**
- Apontamentos de aulas presenciais
- Slides espec√≠ficos do professor
- Explica√ß√µes complementares em sala
- Material exclusivo n√£o oficial

---
**ü§ñ PROMPT PARA INTELIG√äNCIA ARTIFICIAL (Claude, ChatGPT, etc.):**

```
Atue como um especialista em elabora√ß√£o de quest√µes para ensino superior. 

REGRAS OBRIGAT√ìRIAS:
1. NUNCA crie perguntas de n√≠vel f√°cil - apenas M√âDIO e DIF√çCIL
2. SEMPRE use o formato: üë®‚Äçüè´ **[PROFESSOR]** no in√≠cio da pergunta
3. SEMPRE base as perguntas em "apontamentos do professor" ou "explicado em aula"
4. SEMPRE inclua todos os campos obrigat√≥rios no JSON
5. SEMPRE crie explica√ß√µes detalhadas come√ßando com "Baseado nos apontamentos do professor:"

ESTRUTURA DA PERGUNTA:
- Enunciado: Deve referenciar explicitamente material de aula presencial
- 4 alternativas: 1 correta detalhada + 3 distratores plaus√≠veis  
- Explica√ß√£o: M√≠nimo 2-3 linhas com fundamenta√ß√£o cient√≠fica/te√≥rica
- Categoria: Formato adapt√°vel √† disciplina (ex: "T√≥pico - Subt√≥pico")

FOCOS POR N√çVEL:
M√âDIO:
- Aplica√ß√£o de conceitos em situa√ß√µes pr√°ticas
- Correla√ß√£o entre teoria e pr√°tica
- Compara√ß√£o entre diferentes abordagens/sistemas
- An√°lise de mecanismos/processos espec√≠ficos

DIF√çCIL:
- Integra√ß√£o de m√∫ltiplos conceitos
- An√°lise de casos complexos/patol√≥gicos
- Correla√ß√µes interdisciplinares
- Aplica√ß√µes em diagn√≥stico/resolu√ß√£o de problemas

PAR√ÇMETROS T√âCNICOS (INFORMAR SEMPRE):
- Disciplina: [NOME COMPLETO DA DISCIPLINA]
- Per√≠odo: [1, 2, 3, 4, etc. conforme o curso]
- Quantidade: [N√öMERO DE PERGUNTAS DESEJADAS]
- T√≥picos: [LISTAR T√ìPICOS ESPEC√çFICOS DO MATERIAL]

TEMPLATE JSON OBRIGAT√ìRIO:
{
  "pergunta": "üë®‚Äçüè´ **[PROFESSOR]** Segundo explicado em aula sobre [T√ìPICO], [SITUA√á√ÉO/PERGUNTA]?",
  "opcoes": [
    "[RESPOSTA CORRETA COM DETALHES]",
    "[DISTRATOR PLAUS√çVEL 1]",
    "[DISTRATOR PLAUS√çVEL 2]", 
    "[DISTRATOR PLAUS√çVEL 3]"
  ],
  "resposta_correta": "[REPETIR RESPOSTA CORRETA EXATA]",
  "categoria": "[T√ìPICO PRINCIPAL] - [SUBT√ìPICO]",
  "periodo": [N√öMERO DO PER√çODO],
  "disciplina": "[NOME COMPLETO DA DISCIPLINA]",
  "dificuldade": "medio" ou "dificil",
  "explicacao": "Baseado nos apontamentos do professor: [EXPLICA√á√ÉO DETALHADA]",
  "referencia": "Apontamentos Prof. - [T√ìPICO]",
  "fonte_material": "professor",
  "legenda": "üìö Material extra√≠do de aula presencial",
  "prioridade_selecao": 0.7
}

AP√ìS ESTE PROMPT, FORNE√áA:
1. Material/imagens dos apontamentos do professor
2. Nome completo da disciplina
3. Per√≠odo/semestre do curso
4. T√≥picos espec√≠ficos a serem abordados
5. N√∫mero de perguntas desejadas

EXEMPLOS DE USO PARA DIFERENTES DISCIPLINAS:

ENFERMAGEM:
"Baseado nas imagens sobre Sistema End√≥crino, crie 10 perguntas para MORFOFISIOLOGIA II, per√≠odo 2, cobrindo: sinaliza√ß√£o celular, horm√¥nios, feedback negativo."

DIREITO:
"Baseado nos apontamentos sobre Direitos Fundamentais, crie 8 perguntas para DIREITO CONSTITUCIONAL, per√≠odo 3, cobrindo: princ√≠pios, garantias, limita√ß√µes."

MEDICINA:
"Baseado no material sobre Patologia Cardiovascular, crie 12 perguntas para PATOLOGIA GERAL, per√≠odo 4, cobrindo: aterosclerose, infarto, insufici√™ncia card√≠aca."

ADMINISTRA√á√ÉO:
"Baseado nas aulas sobre Gest√£o de Pessoas, crie 6 perguntas para RECURSOS HUMANOS, per√≠odo 5, cobrindo: lideran√ßa, motiva√ß√£o, conflitos."
```

##### **Como Sincronizar Perguntas do Professor:**

1. **Adicione as perguntas** no `perguntas_test.json` usando o formato acima
2. **Extraia perguntas do professor** (se necess√°rio):
   ```bash
   python extrair_professor.py  # Cria perguntas_professor_apenas.json
   ```
3. **Sincronize** com o banco principal:
   ```bash
   python sincronizar_perguntas.py --staging perguntas_professor_apenas.json
   ```

##### **Distribui√ß√£o Autom√°tica 70/30:**
- Em disciplinas com perguntas do professor, o sistema automaticamente seleciona:
  - **70% perguntas** marcadas como `fonte_material: "professor"`
  - **30% perguntas** do material oficial da universidade
- Interface mostra **badge verde** com √≠cone de professor para perguntas de aula presencial

##### **Exemplo de Uso Completo:**

**Para MORFOFISIOLOGIA II - Sistema End√≥crino:**
```json
{
  "pergunta": "üë®‚Äçüè´ **[PROFESSOR]** Segundo explicado em aula sobre tipos de sinaliza√ß√£o celular, qual a principal caracter√≠stica que diferencia a sinaliza√ß√£o par√°crina da end√≥crina?",
  "opcoes": [
    "Sinaliza√ß√£o par√°crina atua localmente entre c√©lulas vizinhas, enquanto end√≥crina atua sistemicamente",
    "Sinaliza√ß√£o par√°crina utiliza apenas neurotransmissores, end√≥crina apenas horm√¥nios proteicos",
    "Sinaliza√ß√£o par√°crina √© mais lenta que end√≥crina devido √† dist√¢ncia percorrida",
    "Sinaliza√ß√£o par√°crina requer receptores intracelulares, end√≥crina apenas de membrana"
  ],
  "resposta_correta": "Sinaliza√ß√£o par√°crina atua localmente entre c√©lulas vizinhas, enquanto end√≥crina atua sistemicamente",
  "categoria": "Sistema End√≥crino - Tipos de Sinaliza√ß√£o",
  "periodo": 2,
  "disciplina": "MORFOFISIOLOGIA II",
  "dificuldade": "medio",
  "explicacao": "Baseado nos apontamentos do professor: A sinaliza√ß√£o par√°crina caracteriza-se pela a√ß√£o local sobre c√©lulas vizinhas, sem necessidade de transporte sist√™mico, enquanto a sinaliza√ß√£o end√≥crina envolve horm√¥nios que percorrem a corrente sangu√≠nea para atingir c√©lulas-alvo distantes.",
  "referencia": "Apontamentos Prof. - Sistema End√≥crino",
  "fonte_material": "professor",
  "legenda": "üìö Material extra√≠do de aula presencial",
  "prioridade_selecao": 0.7
}
```

### 2. **Restaurar Backup**
- O backup das perguntas de recupera√ß√£o est√° em `data/perguntas_recuperacao_backup.json`.
- Para restaurar, use o bot√£o "Redefinir Banco de Perguntas" no painel admin ou copie manualmente o arquivo de backup sobre o arquivo principal.

### 3. **Alterar Admin**
- Altere o email ou senha do admin pelo painel admin em "Configura√ß√µes do Sistema".
- O arquivo de configura√ß√£o do admin √© `admin_user.json`.

### 4. **Exportar Banco de Perguntas**
- Use o bot√£o "Exportar Banco de Perguntas" no painel admin para baixar o arquivo JSON atual.

### 5. **Atualizar Depend√™ncias**
- As depend√™ncias est√£o em `requirements.txt`.
- Para atualizar:
  ```bash
  pip install -r requirements.txt
  ```

### 6. **Rodar Scripts de An√°lise**
- O script `analise_respostas.py` gera um relat√≥rio de perguntas com respostas desbalanceadas.
- Execute com:
  ```bash
  python analise_respostas.py
  ```
- O relat√≥rio ser√° salvo como `relatorio_comprimento_respostas.txt`.

---
### **Passo a Passo para Deploy**
> **‚ö†Ô∏è IMPORTANTE: Esta se√ß√£o foi testada e est√° funcionando. N√ÉO ALTERE estes comandos!**

#### 1. **Copie os arquivos para a pasta deploy**
No PowerShell, execute:
```powershell
cd "G:\Meu Drive\quiz\quiz_1"
copy app.py deploy\
copy requirements.txt deploy\
copy admin_user.json deploy\
copy Dockerfile deploy\
robocopy data deploy\data /E
robocopy static deploy\static /E
robocopy templates deploy\templates /E
```
> **Obs:** Sempre copie os arquivos do projeto para a pasta `deploy` antes de cada build/deploy!

#### 2. **Acesse a pasta deploy**
```powershell
cd "G:\Meu Drive\quiz\quiz_1\deploy"
```

#### 3. **Build e deploy no Google Cloud Run**
```powershell
gcloud builds submit --tag gcr.io/quizenfermagem/quiz_cloud
gcloud run deploy quiz-cloud --image gcr.io/quizenfermagem/quiz_cloud --platform managed --region us-central1 --allow-unauthenticated
```

#### 4. **Acesse o sistema**
- O terminal mostrar√° a URL p√∫blica do seu app (ex: `https://quiz-cloud-xxxxxx.a.run.app`)
- Acesse no navegador para testar.

#### 5. **Ver logs do Cloud Run**
```powershell
gcloud run services logs read quiz-cloud --project=quizenfermagem --region=us-central1 --limit=50
```

---

## üìÅ Estrutura Recomendada

```
quiz_cloud/
‚îú‚îÄ‚îÄ app.py
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ app.yaml
‚îú‚îÄ‚îÄ data/
‚îú‚îÄ‚îÄ static/
‚îú‚îÄ‚îÄ templates/
‚îú‚îÄ‚îÄ admin_user.json
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ ...
```

---

## üí° Dicas de Manuten√ß√£o
- Sempre fa√ßa backup dos arquivos `data/` e `admin_user.json` antes de atualizar.
- Use o painel admin para tarefas comuns de manuten√ß√£o.
- Para debug, use logs do Flask ou do Google Cloud.
- Para restaurar o sistema, basta copiar os arquivos de backup sobre os arquivos principais.

---

## üìû Suporte
Se precisar de ajuda para manuten√ß√£o, atualiza√ß√£o ou deploy, consulte este README ou entre em contato com o desenvolvedor respons√°vel.

---

**Projeto: quiz_cloud**

# üéØ Quiz Interativo - Sistema de Perguntas e Respostas

Um sistema moderno e interativo de quiz desenvolvido em Flask, com design responsivo e funcionalidades avan√ßadas para estudantes de enfermagem.

## ‚ú® Caracter√≠sticas Principais

### üé® Design Moderno
- **Interface responsiva** com design glassmorphism
- **Gradientes atrativos** e anima√ß√µes suaves
- **Tipografia moderna** usando Inter Font
- **√çcones FontAwesome** para melhor experi√™ncia visual
- **Anima√ß√µes CSS** e efeitos hover
- **Compatibilidade mobile** completa

### üìö Funcionalidades do Quiz
- **Quiz Normal**: Perguntas por per√≠odo e disciplina
- **Quiz Recupera√ß√£o**: Foco em t√≥picos espec√≠ficos (ESF)
- **Sistema de pontua√ß√£o** em tempo real
- **Timer configur√°vel** para cada quest√£o
- **Feedback imediato** com explica√ß√µes
- **Acessibilidade** com leitura de tela (TTS)
- **Progresso visual** com barras animadas

### üîê √Årea Administrativa
- **Login seguro** com Google OAuth
- **Dashboard moderno** com estat√≠sticas
- **Gerenciamento completo** de perguntas
- **Sistema de backup** autom√°tico
- **Interface intuitiva** para administradores

## üöÄ Tecnologias Utilizadas

- **Backend**: Python Flask
- **Frontend**: HTML5, CSS3, JavaScript
- **Design**: CSS Grid, Flexbox, Glassmorphism
- **Fontes**: Inter (Google Fonts)
- **√çcones**: FontAwesome 6.0
- **Autentica√ß√£o**: Google OAuth
- **Dados**: JSON (perguntas e configura√ß√µes)

## üìÅ Estrutura do Projeto

```
quiz_1/
‚îú‚îÄ‚îÄ app.py                          # Aplica√ß√£o principal Flask
‚îú‚îÄ‚îÄ data/                           # Dados do quiz
‚îÇ   ‚îú‚îÄ‚îÄ perguntas.json             # Perguntas principais
‚îÇ   ‚îî‚îÄ‚îÄ perguntas_recuperacao.json # Perguntas de recupera√ß√£o (ESF)
‚îú‚îÄ‚îÄ static/                         # Arquivos est√°ticos
‚îÇ   ‚îú‚îÄ‚îÄ style.css                  # Estilos globais
‚îÇ   ‚îú‚îÄ‚îÄ quiz.js                    # JavaScript do quiz
‚îÇ   ‚îú‚îÄ‚îÄ admin.js                   # JavaScript do admin
‚îÇ   ‚îú‚îÄ‚îÄ admin-dashboard.css        # Estilos do dashboard admin
‚îÇ   ‚îî‚îÄ‚îÄ script.js                  # Scripts auxiliares
‚îú‚îÄ‚îÄ templates/                      # Templates HTML
‚îÇ   ‚îú‚îÄ‚îÄ index.html                 # P√°gina inicial
‚îÇ   ‚îú‚îÄ‚îÄ quiz.html                  # Interface do quiz
‚îÇ   ‚îú‚îÄ‚îÄ resultado.html             # P√°gina de resultados
‚îÇ   ‚îî‚îÄ‚îÄ admin/                     # √Årea administrativa
‚îÇ       ‚îú‚îÄ‚îÄ login.html             # Login admin
‚îÇ       ‚îú‚îÄ‚îÄ dashboard.html         # Dashboard admin moderno
‚îÇ       ‚îî‚îÄ‚îÄ setup.html             # Configura√ß√£o inicial
‚îú‚îÄ‚îÄ deploy/                        # Vers√£o de produ√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                 # Configura√ß√£o Docker
‚îÇ   ‚îú‚îÄ‚îÄ app.py                     # App otimizado para produ√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt           # Depend√™ncias de produ√ß√£o
‚îú‚îÄ‚îÄ requirements.txt               # Depend√™ncias de desenvolvimento
‚îî‚îÄ‚îÄ README.md                      # Documenta√ß√£o
```

## üéØ P√°ginas Principais

### 1. P√°gina Inicial (`/`)
- **Sele√ß√£o de quiz** (Normal/Recupera√ß√£o)
- **Filtros por per√≠odo** e disciplina
- **Estat√≠sticas** em tempo real
- **Design responsivo** com cards modernos

### 2. Interface do Quiz (`/quiz`)
- **Perguntas din√¢micas** com op√ß√µes interativas
- **Timer visual** com anima√ß√µes
- **Progresso em tempo real**
- **Feedback imediato** com cores
- **Acessibilidade** com TTS

### 3. Resultados (`/resultado`)
- **Pontua√ß√£o detalhada** com anima√ß√µes
- **An√°lise de performance** com emojis
- **Revis√£o de respostas** com explica√ß√µes
- **Compartilhamento** de resultados

### 4. √Årea Administrativa
- **Login seguro** com Google
- **Dashboard moderno** com m√©tricas avan√ßadas
- **CRUD completo** de perguntas
- **Backup autom√°tico** dos dados
- **Analytics em tempo real**

## üé® Design System

### Cores Principais
- **Prim√°ria**: `#667eea` ‚Üí `#764ba2` (Gradiente)
- **Sucesso**: `#27ae60` ‚Üí `#2ecc71` (Gradiente)
- **Erro**: `#e74c3c` ‚Üí `#c0392b` (Gradiente)
- **Aviso**: `#f39c12` ‚Üí `#f1c40f` (Gradiente)

### Tipografia
- **Fam√≠lia**: Inter (Google Fonts)
- **Pesos**: 300, 400, 500, 600, 700, 800
- **Hierarquia**: T√≠tulos grandes, texto leg√≠vel

### Componentes
- **Cards**: Glassmorphism com blur
- **Bot√µes**: Gradientes com hover effects
- **Formul√°rios**: Campos modernos com focus states
- **Progresso**: Barras animadas com shimmer

## üöÄ Como Executar

### Pr√©-requisitos
- Python 3.7+
- pip (gerenciador de pacotes)

### Instala√ß√£o Local

1. **Clone o reposit√≥rio**
```bash
git clone <url-do-repositorio>
cd quiz_1
```

2. **Crie um ambiente virtual**
```bash
python -m venv .venv
```

3. **Ative o ambiente virtual**
```bash
# Windows
.venv\Scripts\activate

# macOS/Linux
source .venv/bin/activate
```

4. **Instale as depend√™ncias**
```bash
pip install -r requirements.txt
```

5. **Execute a aplica√ß√£o**
```bash
python app.py
```

6. **Acesse no navegador**
```
http://localhost:8080
```

## ‚òÅÔ∏è Deploy em Produ√ß√£o

### üê≥ Deploy com Docker

#### 1. **Usando a pasta deploy (Recomendado)**
```bash
cd deploy
docker build -t quiz-enfermagem .
docker run -p 8080:8080 -e PERGUNTAS_JSON_PATH=data/perguntas.json quiz-enfermagem
```

#### 2. **Deploy direto**
```bash
docker build -t quiz-enfermagem .
docker run -p 8080:8080 -e PERGUNTAS_JSON_PATH=data/perguntas.json quiz-enfermagem
```

### üåê Deploy no Google Cloud Run

#### 1. **Configura√ß√£o inicial**
```bash
# Instale o Google Cloud CLI
# Configure o projeto
gcloud config set project SEU_PROJECT_ID
```

#### 2. **Build e deploy**
```bash
cd deploy
gcloud builds submit --tag gcr.io/SEU_PROJECT_ID/quiz-enfermagem
gcloud run deploy quiz-enfermagem \
  --image gcr.io/SEU_PROJECT_ID/quiz-enfermagem \
  --platform managed \
  --region us-central1 \
  --allow-unauthenticated \
  --port 8080 \
  --set-env-vars PERGUNTAS_JSON_PATH=data/perguntas.json
```

#### 3. **Acesse a aplica√ß√£o**
- A URL ser√° exibida no terminal ap√≥s o deploy
- Exemplo: `https://quiz-enfermagem-xxxxx.a.run.app`

### üê≥ Deploy no Docker Hub

#### 1. **Build da imagem**
```bash
docker build -t seu-usuario/quiz-enfermagem:latest .
```

#### 2. **Push para Docker Hub**
```bash
docker push seu-usuario/quiz-enfermagem:latest
```

#### 3. **Deploy em qualquer servidor**
```bash
docker pull seu-usuario/quiz-enfermagem:latest
docker run -p 8080:8080 seu-usuario/quiz-enfermagem:latest
```

### üöÄ Deploy no Heroku

#### 1. **Instale o Heroku CLI**
```bash
# Windows
# Baixe e instale do site oficial

# macOS
brew install heroku/brew/heroku
```

#### 2. **Configure o projeto**
```bash
heroku login
heroku create quiz-enfermagem-app
```

#### 3. **Deploy**
```bash
git add .
git commit -m "Deploy to Heroku"
git push heroku main
```

#### 4. **Abra a aplica√ß√£o**
```bash
heroku open
```

### üîß Deploy Manual em VPS

#### 1. **Prepare o servidor**
```bash
# Instale Python, pip e nginx
sudo apt update
sudo apt install python3 python3-pip nginx
```

#### 2. **Configure o projeto**
```bash
# Clone o reposit√≥rio
git clone <url-do-repositorio>
cd quiz_1

# Instale depend√™ncias
pip3 install -r requirements.txt
```

#### 3. **Configure o Gunicorn**
```bash
# Instale gunicorn
pip3 install gunicorn

# Crie um servi√ßo systemd
sudo nano /etc/systemd/system/quiz-enfermagem.service
```

Conte√∫do do arquivo de servi√ßo:
```ini
[Unit]
Description=Quiz Enfermagem
After=network.target

[Service]
User=www-data
WorkingDirectory=/path/to/quiz_1
Environment="PATH=/path/to/quiz_1/.venv/bin"
ExecStart=/path/to/quiz_1/.venv/bin/gunicorn --workers 3 --bind unix:quiz-enfermagem.sock -m 007 app:app

[Install]
WantedBy=multi-user.target
```

#### 4. **Configure o Nginx**
```bash
sudo nano /etc/nginx/sites-available/quiz-enfermagem
```

Conte√∫do da configura√ß√£o:
```nginx
server {
    listen 80;
    server_name seu-dominio.com;

    location / {
        include proxy_params;
        proxy_pass http://unix:/path/to/quiz_1/quiz-enfermagem.sock;
    }
}
```

#### 5. **Ative o servi√ßo**
```bash
sudo ln -s /etc/nginx/sites-available/quiz-enfermagem /etc/nginx/sites-enabled
sudo systemctl start quiz-enfermagem
sudo systemctl enable quiz-enfermagem
sudo systemctl restart nginx
```

## üîß Configura√ß√µes de Produ√ß√£o

### Vari√°veis de Ambiente
```bash
# Configura√ß√µes do Flask
export FLASK_ENV=production
export FLASK_DEBUG=0

# Configura√ß√µes do servidor
export PORT=8080
export HOST=0.0.0.0
```

### Configura√ß√µes de Seguran√ßa
- ‚úÖ **HTTPS habilitado** em produ√ß√£o
- ‚úÖ **Headers de seguran√ßa** configurados
- ‚úÖ **CORS configurado** adequadamente
- ‚úÖ **Rate limiting** implementado
- ‚úÖ **Valida√ß√£o de entrada** robusta

### Monitoramento
- üìä **Logs estruturados** para an√°lise
- üîç **M√©tricas de performance** em tempo real
- ‚ö†Ô∏è **Alertas autom√°ticos** para erros
- üìà **Dashboard de analytics** integrado

## üÜï Atualiza√ß√µes Implementadas

### Sistema de Perguntas do Professor (v1.2)

#### **Funcionalidades Implementadas:**

##### 1. **Destaque Visual das Perguntas do Professor**
- ‚úÖ **Badge verde** na interface do quiz com √≠cone `fas fa-chalkboard-teacher`
- ‚úÖ **Legenda explicativa**: "üìö Material extra√≠do de aula presencial"
- ‚úÖ **Prefixo visual** no enunciado: `üë®‚Äçüè´ **[PROFESSOR]**`

##### 2. **Distribui√ß√£o Inteligente 70/30**
- ‚úÖ **L√≥gica autom√°tica** no `app.py` (linhas 511-545)
- ‚úÖ **70% perguntas do professor** quando dispon√≠veis
- ‚úÖ **30% material oficial** da universidade
- ‚úÖ **Fallback inteligente** quando n√£o h√° perguntas suficientes

##### 3. **Novos Campos no Banco de Dados**
- ‚úÖ `fonte_material`: "professor" | "oficial"
- ‚úÖ `legenda`: "üìö Material extra√≠do de aula presencial"
- ‚úÖ `prioridade_selecao`: 0.7 (para c√°lculos de distribui√ß√£o)

##### 4. **Scripts de Sincroniza√ß√£o**
- ‚úÖ **sincronizar_perguntas.py**: Integra√ß√£o com novos campos
- ‚úÖ **extrair_professor.py**: Extra√ß√£o espec√≠fica de perguntas do professor
- ‚úÖ **Deduplica√ß√£o inteligente**: Evita perguntas repetidas

##### 5. **Interface Aprimorada**
- ‚úÖ **CSS customizado** para badge do professor
- ‚úÖ **Template atualizado** (`templates/quiz.html`)
- ‚úÖ **Detec√ß√£o autom√°tica** do tipo de pergunta

#### **Arquivos Modificados:**

1. **app.py** (linhas 506-545): L√≥gica de distribui√ß√£o 70/30
2. **templates/quiz.html** (linhas 410-415, 109-126): Interface e CSS
3. **perguntas_test.json**: Formato atualizado com novos campos
4. **sincronizar_perguntas.py**: Suporte aos novos campos
5. **extrair_professor.py**: Script de extra√ß√£o espec√≠fica

#### **Estat√≠sticas Atuais:**
- üìä **42 perguntas do professor** criadas para MORFOFISIOLOGIA II
  - 12 sobre Sistema End√≥crino (Sinaliza√ß√£o)
  - 10 sobre Eixo Hipot√°lamo-Hip√≥fise
  - 20 sobre Sistema Reprodutor
- üìö **Sistema completo** para material oficial e do professor
- üéØ **100% das perguntas** em n√≠veis m√©dio/dif√≠cil
- ‚úÖ **Distribui√ß√£o autom√°tica 70/30** funcionando
- ü§ñ **2 Scripts de IA** dispon√≠veis (oficial + professor)

#### **Como Verificar se Est√° Funcionando:**

1. **Inicie um quiz** de MORFOFISIOLOGIA II, per√≠odo 2
2. **Observe o badge verde** nas perguntas do professor
3. **Verifique a distribui√ß√£o**: ~70% com badge, ~30% sem badge
4. **Confira o log** do app para ver a sele√ß√£o de perguntas

#### **Comandos de Teste:**
```bash
# Verificar perguntas do professor no banco
python -c "import json; data=json.load(open('data/perguntas.json', 'r', encoding='utf-8')); prof=[q for q in data if q.get('fonte_material')=='professor']; print(f'Perguntas do professor: {len(prof)}')"

# Testar sincroniza√ß√£o
python extrair_professor.py  # Extrai perguntas do professor
python sincronizar_perguntas.py --staging perguntas_professor_apenas.json --dry-run

# Executar aplica√ß√£o
python app.py
```

## üõ†Ô∏è Manuten√ß√£o

### Backup Autom√°tico
- **Dados**: Backup autom√°tico das perguntas
- **Configura√ß√µes**: Backup das configura√ß√µes do admin
- **Sess√µes**: Limpeza autom√°tica de sess√µes antigas

### Atualiza√ß√µes
```bash
# Atualizar depend√™ncias
pip install -r requirements.txt --upgrade

# Reiniciar aplica√ß√£o
sudo systemctl restart quiz-enfermagem
```

### Logs
```bash
# Ver logs da aplica√ß√£o
sudo journalctl -u quiz-enfermagem -f

# Ver logs do nginx
sudo tail -f /var/log/nginx/access.log
```

## üìû Suporte

Para suporte t√©cnico ou d√∫vidas sobre deploy:
- üìß **Email**: [seu-email@exemplo.com]
- üì± **Telegram**: [@seu-usuario]
- üåê **Documenta√ß√£o**: [link-para-docs]

---

**Vers√£o**: 2.1.0 - Sistema de Perguntas do Professor  
**√öltima atualiza√ß√£o**: Janeiro 2025  
**Status**: ‚úÖ Pronto para produ√ß√£o